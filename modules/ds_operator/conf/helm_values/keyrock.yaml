fullnameOverride: ${service_name}

#* External hostname of Keyrock
host: https://${service_name}.${ds_domain}
#* Port that the keyrock container uses
port: 8080 # default port

#* Admin keyrock user
admin:
  user: admin
  password: ${admin_password}
  email: ${admin_email}

#* MySQL Database configuration
db:
  user: root
  password: ${mysql_root_password}
  host: ${mysql_service}

route:
  enabled: false
#* Ingress configuration (should there be an ingress to connect the activation
#* service with the public internet)
ingress:
    enabled: true
    annotations:
        kubernetes.io/ingress.class: "nginx"
        # forcing everything to use ssl
        ingress.kubernetes.io/ssl-redirect: "true"
        # example annotations, allowing cert-manager to automatically create tls-certs
        # kubernetes.io/tls-acme: "true"
    hosts:
      - host: ${service_name}.${ds_domain}
        paths:
        - /
    # configure the ingress' tls
    # tls:
      # - secretName: keyrock-tls
        # hosts:
          # - keyrock.fiware.org

# ## Configuration of Authorisation Registry (AR)
# authorisationRegistry: #! What is this??
#     # -- Enable usage of authorisation registry
#     enabled: true
#     # -- Identifier (EORI) of AR
#     identifier: "did:web:my-did:did"
#     # -- URL of AR
#     url: "internal"

# ## Configuration of iSHARE Satellite
# satellite: #! What is this??
#     # -- Enable usage of satellite
#     enabled: true
#     # -- Identifier (EORI) of satellite
#     identifier: "EU.EORI.FIWARESATELLITE"
#     # -- URL of satellite
#     url: "https://tir.dataspace.com"
#     # -- Token endpoint of satellite
#     tokenEndpoint: "https://https://tir.dataspace.com/token"
#     # -- Parties endpoint of satellite
#     partiesEndpoint: "https://https://tir.dataspace.com/parties"

## -- Configuration of local key and certificate for validation and generation of tokens
# token:
#     # -- Enable storage of local key and certificate
#     enabled: false

# ENV variables for Keyrock
# additionalEnvVars:
#     - name: IDM_TITLE
#     value: "dsba AR"
#     - name: IDM_DEBUG
#     value: "true"
#     - name: DEBUG
#     value: "*"
#     - name: IDM_DB_NAME
#     value: ar_idm
#     - name: IDM_DB_SEED
#     value: "true"
#     - name: IDM_SERVER_MAX_HEADER_SIZE
#     value: "32768"
#     - name: IDM_PR_CLIENT_ID
#     value: "did:web:my-did:did"
#     - name: IDM_PR_CLIENT_KEY
#     valueFrom: #! What is this??
#         secretKeyRef:
#             name: vcwaltid-tls-sec
#             key: tls.key
#     - name: IDM_PR_CLIENT_CRT
#     valueFrom: #! What is this??
#         secretKeyRef:
#             name: vcwaltid-tls-sec
#             key: tls.crt
